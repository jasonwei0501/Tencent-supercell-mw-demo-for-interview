# 皇室战争：失落王国

一款基于《皇室战争》创新玩法的Web游戏demo，演示了策划案中的核心功能。

## 🎮 游戏特色

### 🧩 背包整理备战系统（增强版）
- **多格拼图机制**: 不同卡牌占据不同格子
  - 巨人(2x2): 大块头坦克单位
  - 骑士(L型): 灵活的近战单位  
  - 弓箭手(1x1): 小巧的远程单位
  - 法师(1x2): 横向施法单位
- **形状预览**: 选卡时显示占格形状
- **智能放置**: 自动检测空间是否足够
- **积木感**: 真正的俄罗斯方块式空间规划

### ⚔️ 百人同屏战斗系统（Juice增强）
- **打击感升级**: 
  - 单位浮动动画
  - 攻击缩放效果
  - 受击震动反馈
  - 爆炸粒子效果
  - 伤害数字飘字
- **倍速战斗**: 1x/2x/4x三档速度，立现战果
- **史诗战场**: 一张卡牌生成10-19个单位
- **视觉盛宴**: 渐变色彩、阴影效果、流畅动画

### 👥 社交背叛机制（压迫感强化）
- **背刺震撼效果**:
  - 全屏红色闪烁
  - 手机震动模拟
  - 警告文字弹出
  - 微信封号般压迫感
- **善恶阵营**: 皇家骑士 vs 哥布林
- **情感驱动**: 背叛截图引发群聊炸裂
- **特权体验**: 群体红包 vs 世界BOSS

### 🗺️ 箱庭探索与领土主权
- **漂浮岛屿**: 5个精美的领土地图
- **视觉净化**: 从灰暗到繁荣的转变动画
- **自动收益**: 收复领土持续产出金币
- **防守策略**: 为领土设置防御阵型

## 🚀 快速开始

1. 安装依赖
```bash
npm install
```

2. 启动开发服务器
```bash
npm run dev
```

3. 打开浏览器访问 `http://localhost:5173`

## 🎯 核心玩法演示

### 1. 准备阶段
- 选择卡牌，注意费用限制(10点)
- 将卡牌拖拽到6x6战场格子
- 不同形状卡牌占用不同空间
- 合理布置防御阵型

### 2. 战斗阶段
- 卡牌实体化为多个单位
- 自动进行实时战斗
- 观看我方与敌方的百人对决
- 战斗结果影响金币收益

### 3. 社交系统
- 选择加入皇家骑士或哥布林阵营
- 与好友互动：帮助(消耗金币)或背刺(掠夺金币)
- 体验不同阵营的特权玩法
- 感受微信群裂变的传播效果

### 4. 领土征服
- 攻击被哥布林占领的领土
- 成功收复后获得持续资源产出
- 为收复的领土设置防御阵型
- 建立属于自己的王国

## 🛠️ 技术实现

- **前端框架**: React 18 + TypeScript
- **UI组件库**: Material-UI (MUI) + Tailwind CSS
- **构建工具**: Vite
- **开发环境**: Node.js + npm

## 📁 项目结构

```
src/
├── components/          # 游戏组件
│   ├── PreparationPhase.tsx    # 准备阶段
│   ├── BattlePhase.tsx         # 战斗阶段
│   ├── SocialSystem.tsx        # 社交系统
│   ├── TerritorySystem.tsx     # 领土系统
│   ├── DefenseSetup.tsx        # 防守布置
│   ├── CardSelection.tsx       # 卡牌选择
│   └── InventoryGrid.tsx       # 背包网格
├── data/               # 游戏数据
│   └── cards.ts               # 卡牌数据
├── types/              # 类型定义
│   └── index.ts               # 游戏类型
└── App.tsx             # 主应用组件
```

## 🎨 设计理念

本demo完整实现了策划案中的核心创新点：

1. **降维打击**: 降低操作门槛，保留策略快感
2. **社交升维**: 从机械互动到情感驱动的病毒传播
3. **沉浸体验**: 箱庭设计带来的高级感，收复河山的成就感

## 🤝 贡献

这是一个演示项目，展示了如何将策划案转化为可玩的游戏原型。欢迎提出建议和反馈！

## 🆕 最新Juice升级（2026.02）

### 💥 战斗单位史莱姆化（Squash & Stretch）
- **弹性物理**: 攻击时压缩变扁，然后拉伸撞击
- **呼吸动画**: 所有单位像活物一样呼吸
- **5阶段攻击**: 专业的cubic-bezier动画曲线
- **形变效果**: scaleX/scaleY实现真实挤压感

### 🧩 积木嵌入快感（Snap-in）
- **弹性放置**: 放置时的弹性缩放+旋转
- **多格系统**: 巨人(2x2)、骑士(L型)、法师(1x2)等
- **形状预览**: 矩阵显示卡牌占格形状
- **智能检测**: 自动检测放置空间是否足够

### ⚡ 背刺震撼效果（微信警告级）
- **5级红闪**: 多层次红色闪烁效果
- **页面震动**: CSS震动模拟警告感
- **警告弹窗**: 大号警告文字震撼视觉
- **压迫强度**: 模拟"被封号"的真实冲击

### 🎨 TDesign UI优化
- **配色完善**: 优化所有#333颜色为#1f2937提高对比度
- **渐变效果**: 专业的渐变色彩运用
- **阴影层次**: 多层次阴影增强立体感
- **彩蛋页面**: 作者信息和制作年份

### 📱 完美适配
- **响应式**: 完美适配PC和移动端
- **无障碍**: 语义化HTML和ARIA标签
- **性能优化**: 事件防抖和内存清理
- **TDesign集成**: 企业级UI组件库

## 🔧 修复更新（最新）

### 页面结构修复
- **页面切换**: 修复底部导航栏功能，现在可以正确切换5个功能页面
- **显示控制**: 使用`display: none/block`控制页面显示/隐藏
- **初始化**: 页面加载时默认显示主菜单
- **导航状态**: 底部导航栏正确显示当前激活页面

### 卡牌选择修复
- **拼写错误**: 修复`gameState.placedCards`的拼写错误
- **显示样式**: 确保卡牌选择页面正确显示
- **交互功能**: 卡牌点击和战场布置功能正常工作

### 完整功能验证
✅ **5个功能页面**：首页、战斗、社交、领土、游戏介绍
✅ **底部导航**: 完美切换各个功能页面
✅ **卡牌系统**: 选择、放置、战斗完整流程
✅ **Juice效果**: 史莱姆化、积木嵌入、背刺震撼
✅ **响应式设计**: 适配PC和移动端

### 🎭 Emoji战斗单位升级（2026最新）
- **视觉革命**: 从圆点变为emoji战斗单位
- **角色区分**: 每个卡牌都有专属emoji图标
  - 🧟‍♂️ 巨人：大块头坦克
  - 🏹 弓箭手：敏捷远程射手
  - 🛡️ 骑士：灵活近战勇士
  - 💀 骷髅兵：廉价人海单位
  - 🧙‍♂️ 法师：范围施法大师
  - 👸 公主：超远程输出核心
- **敌我标识**: 👺(红天狗) vs 玩家(蓝绿阵营)
- **视觉层次**: 光晕效果+颜色区分+面向动画
- **魔性互动**: 呼吸动画+弹性战斗+爆炸特效

### 🎯 技术实现亮点
- **Emoji容器**: 24px正方形单位，完美显示emoji
- **智能渲染**: 卡牌icon直接传入战斗单位
- **视觉反馈**: 光晕阴影+颜色渐变+方向区分
- **性能优化**: pointer-events防止交互干扰

## 📄 许可证

MIT License